cmake_minimum_required(VERSION 3.14 FATAL_ERROR)

create_tmiv_library(
    TARGET
        MivBitstreamLib
    SOURCES
        "src/AccessUnit.cpp"
        "src/AccessUnitDelimiterRBSP.cpp"
        "src/AtlasAdaptationParameterSetRBSP.cpp"
        "src/AtlasFrameParameterSetRBSP.cpp"
        "src/AtlasObjectAssociation.cpp"
        "src/AtlasSequenceParameterSetRBSP.cpp"
        "src/AtlasTileLayerRBSP.cpp"
        "src/AtlasViewEnabled.cpp"
        "src/CafMivExtension.cpp"
        "src/CommonAtlasFrameRBSP.cpp"
        "src/CommonAtlasSequenceParameterSetRBSP.cpp"
        "src/DecodedAtlasInformationHash.cpp"
        "src/DepthOccupancyTransform.cpp"
        "src/GeometryUpscalingParameters.cpp"
        "src/GeometryAssistance.cpp"
        "src/VuiParameters.cpp"
        "src/NalSampleStreamFormat.cpp"
        "src/NalUnit.cpp"
        "src/NalSampleStream.cpp"
        "src/PackedIndependentRegions.cpp"
        "src/PatchParamsList.cpp"
        "src/SeiRBSP.cpp"
        "src/SceneObjectInformation.cpp"
        "src/SequenceConfig.cpp"
        "src/VideoSubBitstream.cpp"
        "src/ViewingSpace.cpp"
        "src/ViewingSpaceHandling.cpp"
        "src/ViewParamsList.cpp"
        "src/ViewportCameraParameters.cpp"
        "src/ViewportPosition.cpp"
        "src/V3cParameterSet.cpp"
        "src/V3cSampleStreamFormat.cpp"
        "src/V3cUnit.cpp"
    PUBLIC
        CommonLib
    PRIVATE
        fmt::fmt
    )

create_catch2_unit_test(
    TARGET
        MivBitstreamTest
    SOURCES
        "src/AccessUnit.test.cpp"
        "src/AccessUnitDelimiterRBSP.test.cpp"
        "src/AtlasAdaptationParameterSetRBSP.test.cpp"
        "src/AtlasFrameParameterSetRBSP.test.cpp"
        "src/AtlasId.test.cpp"
        "src/AtlasObjectAssociation.test.cpp"
        "src/AtlasSequenceParameterSetRBSP.test.cpp"
        "src/AtlasTileLayerRBSP.test.cpp"
        "src/AtlasViewEnabled.test.cpp"
        "src/CafMivExtension.test.cpp"
        "src/CommonAtlasFrameRBSP.test.cpp"
        "src/CommonAtlasSequenceParameterSetRBSP.test.cpp"
        "src/DecodedAtlasInformationHash.test.cpp"
        "src/DepthOccupancyTransform.test.cpp"
        "src/GeometryUpscalingParameters.test.cpp"
        "src/GeometryAssistance.test.cpp"
        "src/VuiParameters.test.cpp"
        "src/NalSampleStreamFormat.test.cpp"
        "src/NalUnit.test.cpp"
        "src/PackedIndependentRegions.test.cpp"
        "src/PatchParamsList.test.cpp"
        "src/SeiRBSP.test.cpp"
        "src/SceneObjectInformation.test.cpp"
        "src/SequenceConfig.test.cpp"
        "src/ViewId.test.cpp"
        "src/ViewingSpace.test.cpp"
        "src/ViewingSpaceHandling.test.cpp"
        "src/ViewParamsList.test.cpp"
        "src/ViewportCameraParameters.test.cpp"
        "src/ViewportPosition.test.cpp"
        "src/V3cParameterSet.test.cpp"
        "src/V3cUnit.test.cpp"
    PRIVATE
        MivBitstreamLib
    )
