cmake_minimum_required(VERSION 3.22 FATAL_ERROR)

create_tmiv_library(
    TARGET
    MivBitstreamLib
    SOURCES
    "src/AccessUnit.cpp"
    "src/AccessUnitDelimiterRBSP.cpp"
    "src/AtlasAdaptationParameterSetRBSP.cpp"
    "src/AtlasFrameParameterSetRBSP.cpp"
    "src/AtlasObjectAssociation.cpp"
    "src/AtlasSequenceParameterSetRBSP.cpp"
    "src/AtlasTileLayerRBSP.cpp"
    "src/AtlasViewEnabled.cpp"
    "src/CafMivExtension.cpp"
    "src/CaptureDeviceInformation.cpp"
    "src/CommonAtlasFrameRBSP.cpp"
    "src/CommonAtlasSequenceParameterSetRBSP.cpp"
    "src/DecodedAtlasInformationHash.cpp"
    "src/DepthOccupancyTransform.cpp"
    "src/ExtendedGeometryAssistance.cpp"
    "src/GeometryUpscalingParameters.cpp"
    "src/GeometryAssistance.cpp"
    "src/VuiParameters.cpp"
    "src/NalSampleStreamFormat.cpp"
    "src/NalUnit.cpp"
    "src/NalSampleStream.cpp"
    "src/PackedIndependentRegions.cpp"
    "src/PatchParamsList.cpp"
    "src/SeiRBSP.cpp"
    "src/SceneObjectInformation.cpp"
    "src/SequenceConfig.cpp"
    "src/VideoSubBitstream.cpp"
    "src/ViewingSpace.cpp"
    "src/ViewingSpaceHandling.cpp"
    "src/ViewParamsList.cpp"
    "src/ViewportCameraParameters.cpp"
    "src/ViewportPosition.cpp"
    "src/V3cParameterSet.cpp"
    "src/V3cSampleStreamFormat.cpp"
    "src/V3cUnit.cpp"
    PUBLIC
    CommonLib)

create_catch2_unit_test(
    TARGET
    MivBitstreamTest
    SOURCES
    "test/AccessUnit_test.cpp"
    "test/AccessUnitDelimiterRBSP_test.cpp"
    "test/AtlasAdaptationParameterSetRBSP_test.cpp"
    "test/AtlasFrameParameterSetRBSP_test.cpp"
    "test/AtlasId_test.cpp"
    "test/AtlasObjectAssociation_test.cpp"
    "test/AtlasSequenceParameterSetRBSP_test.cpp"
    "test/AtlasTileLayerRBSP_test.cpp"
    "test/AtlasViewEnabled_test.cpp"
    "test/CafMivExtension_test.cpp"
    "test/CaptureDeviceInformation_test.cpp"
    "test/CommonAtlasFrameRBSP_test.cpp"
    "test/CommonAtlasSequenceParameterSetRBSP_test.cpp"
    "test/DecodedAtlasInformationHash_test.cpp"
    "test/DepthOccupancyTransform_test.cpp"
    "test/ExtendedGeometryAssistance_test.cpp"
    "test/GeometryUpscalingParameters_test.cpp"
    "test/GeometryAssistance_test.cpp"
    "test/VuiParameters_test.cpp"
    "test/NalSampleStreamFormat_test.cpp"
    "test/NalUnit_test.cpp"
    "test/PackedIndependentRegions_test.cpp"
    "test/PatchParamsList_test.cpp"
    "test/SeiRBSP_test.cpp"
    "test/SceneObjectInformation_test.cpp"
    "test/SequenceConfig_test.cpp"
    "test/ViewId_test.cpp"
    "test/ViewingSpace_test.cpp"
    "test/ViewingSpaceHandling_test.cpp"
    "test/ViewParamsList_test.cpp"
    "test/ViewportCameraParameters_test.cpp"
    "test/ViewportPosition_test.cpp"
    "test/V3cParameterSet_test.cpp"
    "test/V3cUnit_test.cpp"
    PRIVATE
    MivBitstreamLib)
